/*!
 * vue2-storage v3.3.0 
 * (c) 2018 Yarkov Aleksey
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("object-assign")):"function"==typeof define&&define.amd?define(["object-assign"],e):t.Vue2Storage=e(t.objectAssign)}(this,function(t){"use strict";function e(t,e){var r=new s(e);t.$storage=r,t.prototype.$storage=r}t="default"in t?t.default:t;var r={},o=function(){},i={length:{},storage:{}};i.length.get=function(){return Object.keys(this.storage).length},i.storage.get=function(){return r},o.prototype.getItem=function(t){return t in this.storage?this.storage[t]:null},o.prototype.setItem=function(t,e){this.storage[t]=e},o.prototype.removeItem=function(t){t in this.storage&&delete this.storage[t]},o.prototype.clear=function(){var t=this;for(var e in this.storage)delete t.storage[e]},Object.defineProperties(o.prototype,i);var n=new o,s=function(t){void 0===t&&(t={}),this.setOptions(t)},u={name:{},version:{},length:{},driver:{}};return u.name.get=function(){return"vue2-storage[v3.3.0]"},u.version.get=function(){return"3.3.0"},u.length.get=function(){return this.keys().length},u.driver.get=function(){switch(this.options.driver){case"local":default:return"undefined"!=typeof window?window.localStorage:n;case"session":return"undefined"!=typeof window?window.sessionStorage:n;case"memory":return n}},s.prototype.setOptions=function(e){void 0===e&&(e={});var r=t({prefix:"app_",driver:"local",ttl:864e5},e);this.options=Object.freeze(r)},s.prototype.printError=function(t){console.error(this.name+": "+t.stack)},s.prototype.addPrefix=function(t){return""+(this.options.prefix||"")+t},s.prototype.removePrefix=function(t){var e=new RegExp("^"+(this.options.prefix||""));return t.replace(e,"")},s.prototype.toJSON=function(t,e){void 0===e&&(e={});var r="ttl"in e?e.ttl:this.options.ttl;return JSON.stringify({value:t,ttl:Date.now()+r})},s.prototype.fromJSON=function(t){try{var e=JSON.parse(this.driver.getItem(t));return null!==e?"ttl"in e&&Number(e.ttl)<Date.now()?(this.remove(this.removePrefix(t)),null):"value"in e?e.value:e:null}catch(t){return null}},s.prototype.get=function(t,e){void 0===e&&(e=null);try{var r=this.fromJSON(this.addPrefix(t));return null===r?e:r}catch(t){this.printError(t)}},s.prototype.set=function(t,e,r){void 0===r&&(r={});try{this.driver.setItem(this.addPrefix(t),this.toJSON(e,r))}catch(t){this.printError(t)}},s.prototype.remove=function(t){try{this.driver.removeItem(this.addPrefix(t))}catch(t){this.printError(t)}},s.prototype.clear=function(t){var e=this;void 0===t&&(t=!1);try{if(t)this.driver.clear();else{this.keys().filter(function(t){return t.startsWith(e.options.prefix||"")}).forEach(function(t){return e.remove(e.removePrefix(t))})}}catch(t){this.printError(t)}},s.prototype.has=function(t){return"memory"!==this.options.driver?this.addPrefix(t)in this.driver:this.addPrefix(t)in this.driver.storage},s.prototype.key=function(t){try{var e=this.keys()[t];return this.get(this.removePrefix(e))}catch(t){this.printError(t)}},s.prototype.keys=function(){return"memory"!==this.options.driver?Object.keys(this.driver):Object.keys(this.driver.storage)},Object.defineProperties(s.prototype,u),window.Vue2Storage=e,e});